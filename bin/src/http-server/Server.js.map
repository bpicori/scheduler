{"version":3,"file":"Server.js","sourceRoot":"","sources":["../../../src/http-server/Server.ts"],"names":[],"mappings":";;;;;AAAA;;GAEG;AACH,gDAAwB;AAExB,uDAAoD;AAEpD,MAAa,MAAM;IAIjB,YAAY,IAAY,EAAE,IAAY,EAAE,SAAuB;QAC7D,IAAI,CAAC,MAAM,GAAG,IAAI,cAAI,CAAC,MAAM,CAAC;YAC5B,IAAI;YACJ,IAAI;SACL,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,GAAG,IAAI,iCAAe,CAAC,SAAS,CAAC,CAAC;IACnD,CAAC;IAEM,KAAK,CAAC,KAAK;QAChB,IAAI;YACF,MAAM,IAAI,CAAC,MAAM,EAAE,CAAC;YACpB,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;YAC1B,OAAO,CAAC,GAAG,CAAC,sBAAsB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;SAC3D;QAAC,OAAO,GAAG,EAAE;YACZ,OAAO,CAAC,GAAG,CAAC,eAAe,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;SAC3C;IACH,CAAC;IAEO,MAAM;QACZ,QAAQ;QACR,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;YAChB,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;YACpD,MAAM,EAAE,KAAK;YACb,IAAI,EAAE,GAAG;SACV,CAAC,CAAC;QACH,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;YAChB,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;YACrD,MAAM,EAAE,MAAM;YACd,IAAI,EAAE,GAAG;SACV,CAAC,CAAC;QACH,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;YAChB,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;YACrD,MAAM,EAAE,KAAK;YACb,IAAI,EAAE,GAAG;SACV,CAAC,CAAC;QACH,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;YAChB,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;YACrD,MAAM,EAAE,QAAQ;YAChB,IAAI,EAAE,GAAG;SACV,CAAC,CAAC;IACL,CAAC;CACF;AA7CD,wBA6CC","sourcesContent":["/**\n * Created by bpicori on 19-02-05\n */\nimport Hapi from 'hapi';\nimport EventManager from '../event/EventManager';\nimport { EventController } from './EventController';\n\nexport class Server {\n  private server: Hapi.Server;\n  private controller: EventController;\n\n  constructor(host: string, port: number, scheduler: EventManager) {\n    this.server = new Hapi.Server({\n      host,\n      port,\n    });\n    this.controller = new EventController(scheduler);\n  }\n\n  public async start() {\n    try {\n      await this.routes();\n      await this.server.start();\n      console.log(`Server running at: ${this.server.info.uri}`);\n    } catch (err) {\n      console.log(`Hapi error: ${err.message}`);\n    }\n  }\n\n  private routes() {\n    // index\n    this.server.route({\n      handler: this.controller.index.bind(this.controller),\n      method: 'GET',\n      path: '/',\n    });\n    this.server.route({\n      handler: this.controller.create.bind(this.controller),\n      method: 'POST',\n      path: '/',\n    });\n    this.server.route({\n      handler: this.controller.update.bind(this.controller),\n      method: 'PUT',\n      path: '/',\n    });\n    this.server.route({\n      handler: this.controller.delete.bind(this.controller),\n      method: 'DELETE',\n      path: '/',\n    });\n  }\n}\n"]}